/*
 * ============================================================
 *  ABC CHEMICAL — nav-mobile-fix.css  (v2)
 *
 *  ROOT CAUSE FIX: Your site uses bare <ul> tags inside <nav>
 *  with no class names. Previous CSS only targeted .nav-links,
 *  .nav-menu etc. which didn't exist — so nothing was hidden.
 *
 *  INSTALL (in <head>, LAST stylesheet — after all others):
 *    <link rel="stylesheet" href="assets/css/nav-mobile-fix.css">
 *  ALSO add before </body>:
 *    <script src="assets/js/nav-mobile-fix.js"></script>
 * ============================================================ */

@media (max-width: 1023px) {

  /* ---- 1. NAV BAR: fixed strip across top ---- */
  /* Scope ONLY to the main header */
  header.mega-nav-header,
  .mega-nav-header {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    width: 100% !important;
    height: 64px !important;
    /* Slightly taller for better feel */
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    padding: 0 16px !important;
    margin: 0 !important;
    z-index: 9999 !important;
    background: #0b1f3a !important;
    /* Dark theme as requested */
    box-shadow: 0 2px 14px rgba(0, 0, 0, 0.28) !important;
    box-sizing: border-box !important;
    overflow: visible !important;
  }

  /* Ensure the container inside header doesn't push the hamburger off-screen */
  .mega-nav-header .mega-nav-container {
    width: 100% !important;
    margin: 0 !important;
    padding: 0 12px !important;
    flex-grow: 1 !important;
    display: flex !important;
    align-items: center !important;
  }

  .mega-nav-header .mega-nav-inner {
    width: 100% !important;
    display: flex !important;
    flex-direction: row !important;
    align-items: center !important;
    justify-content: space-between !important;
    gap: 10px !important;
    height: 64px !important;
    padding: 0 !important;
  }

  /* Push page down so content isn't under fixed nav */
  body {
    padding-top: 64px !important;
  }

  /* ---- 2. HIDE ALL NAV <ul> LISTS (bare tags, no class) ---- */
  /* This is the key fix — your HTML uses nav > ul with no class */
  .mega-nav-header ul,
  .mega-nav-header nav>ul,
  .mega-nav-inner nav {
    display: none !important;
    visibility: hidden !important;
    height: 0 !important;
    overflow: hidden !important;
    pointer-events: none !important;
  }

  /* Force hide any other floating navs that might be at the top */
  footer nav,
  body>nav:not(.mega-nav-header) {
    position: static !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    top: auto !important;
    left: auto !important;
    transform: none !important;
    background: transparent !important;
    box-shadow: none !important;
    z-index: 1 !important;
  }

  /* Reset ANY bare nav tag that might have been fixed by some broad rule */
  body>nav,
  nav:not(.mega-mobile-nav):not(.drawer-link-container) {
    position: static !important;
  }

  /* Except the one we WANT fixed */
  .mega-nav-header,
  header.mega-nav-header {
    position: fixed !important;
  }

  /* ---- 3. LOGO: left side ---- */
  .mega-nav-header .nav-logo,
  header.mega-nav-header a[href="#home"],
  header.mega-nav-header a[href="index.html"] {
    flex-shrink: 0 !important;
    order: 1 !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    height: auto !important;
    overflow: visible !important;
    pointer-events: auto !important;
    align-items: center !important;
    gap: 8px !important;
    text-decoration: none !important;
    max-width: 65% !important;
  }

  .mega-nav-header img {
    height: 30px !important;
    width: auto !important;
    mix-blend-mode: multiply !important;
    display: block !important;
  }

  /* Brand text colors and width restriction */
  #brand,
  .mega-nav-header span {
    color: #fff !important;
    font-size: 0.82rem !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
    max-width: 170px !important;
  }

  /* ---- 4. LANGUAGE TOGGLE: compact pill, middle ---- */
  .nav-lang,
  .lang-switcher,
  .mega-nav-lang {
    order: 2 !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    height: auto !important;
    pointer-events: auto !important;
    overflow: visible !important;
    align-items: center !important;
    gap: 4px !important;
    margin-left: auto !important;
    margin-right: 10px !important;
    flex-shrink: 0 !important;
    font-size: 0.68rem !important;
    font-weight: 600 !important;
    color: rgba(255, 255, 255, 0.8) !important;
    border: 1px solid rgba(255, 255, 255, 0.25) !important;
    border-radius: 5px !important;
    padding: 4px 9px !important;
    cursor: pointer !important;
    background: transparent !important;
    white-space: nowrap !important;
    line-height: 1 !important;
  }

  /* ---- 5. HAMBURGER: top-right ---- */
  .hamburger,
  .menu-toggle,
  button[aria-label="Toggle menu"] {
    order: 3 !important;
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    pointer-events: auto !important;
    overflow: visible !important;
    flex-shrink: 0 !important;
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 5px !important;
    width: 42px !important;
    height: 42px !important;
    padding: 9px !important;
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 8px !important;
    cursor: pointer !important;
    transition: background 0.2s !important;
    margin: 0 !important;
  }

  .hamburger:hover,
  .menu-toggle:hover {
    background: rgba(255, 255, 255, 0.2) !important;
  }

  .hamburger span,
  .menu-toggle span,
  button[aria-label="Toggle menu"] span,
  #menuBtn span,
  #menuBtn svg {
    display: block !important;
    width: 22px !important;
    height: 2px !important;
    background: #ffffff !important;
    border-radius: 2px !important;
    transition: transform 0.25s ease, opacity 0.25s ease !important;
  }

  /* Force hamburger to be visible and correctly sized */
  #menuBtn {
    display: flex !important;
    visibility: visible !important;
    opacity: 1 !important;
    width: 44px !important;
    height: 44px !important;
    padding: 0 !important;
    margin: 0 !important;
    background: rgba(255, 255, 255, 0.1) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-radius: 8px !important;
    justify-content: center !important;
    align-items: center !important;
    z-index: 10001 !important;
    cursor: pointer !important;
  }

  /* Ensure SVG lines are also visible if the spans fail */
  #menuBtn svg line {
    stroke: #ffffff !important;
  }

  /* X when open */
  .hamburger.is-open span:nth-child(1) {
    transform: translateY(7px) rotate(45deg) !important;
  }

  .hamburger.is-open span:nth-child(2) {
    opacity: 0 !important;
    transform: scaleX(0) !important;
  }

  .hamburger.is-open span:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg) !important;
  }

  .menu-toggle.is-open span:nth-child(1) {
    transform: translateY(7px) rotate(45deg) !important;
  }

  .menu-toggle.is-open span:nth-child(2) {
    opacity: 0 !important;
  }

  .menu-toggle.is-open span:nth-child(3) {
    transform: translateY(-7px) rotate(-45deg) !important;
  }
}

/* ============================================================
   WHITE DRAWER (no media query — always in DOM, toggled by JS)
   ============================================================ */

/* Dimmed backdrop behind drawer */
#mobileMenuBackdrop {
  display: none;
  position: fixed !important;
  top: 64px !important;
  left: 0 !important;
  right: 0 !important;
  bottom: 0 !important;
  background: rgba(11, 31, 58, 0.42) !important;
  z-index: 9990 !important;
  backdrop-filter: blur(3px);
  -webkit-backdrop-filter: blur(3px);
  visibility: hidden;
  opacity: 0;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

#mobileMenuBackdrop.is-open {
  display: block !important;
  visibility: visible !important;
  opacity: 1 !important;
}

/* Drawer panel — WHITE, slides in from right */
#mobileMenuDrawer {
  position: fixed !important;
  top: 64px !important;
  right: 0 !important;
  left: auto !important;
  bottom: 0 !important;
  width: 300px !important;
  max-width: 88vw !important;
  background: #ffffff !important;
  color: #1c2333 !important;
  border-left: 1px solid #dde1e9 !important;
  box-shadow: -8px 0 40px rgba(11, 31, 58, 0.2) !important;
  overflow-y: auto !important;
  -webkit-overflow-scrolling: touch !important;
  padding: 8px 0 48px !important;
  z-index: 9995 !important;
  transform: translateX(110%) !important;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  visibility: visible !important;
}

#mobileMenuDrawer.is-open {
  transform: translateX(0) !important;
}

/* Section label */
#mobileMenuDrawer .drawer-section-label {
  display: block !important;
  font-size: 0.62rem !important;
  font-weight: 700 !important;
  letter-spacing: 0.16em !important;
  text-transform: uppercase !important;
  color: #9aa3b0 !important;
  padding: 16px 20px 6px !important;
}

/* Each link row */
#mobileMenuDrawer a {
  display: block !important;
  font-size: 0.93rem !important;
  font-weight: 500 !important;
  color: #1a2235 !important;
  background: #ffffff !important;
  padding: 13px 20px !important;
  border-bottom: 1px solid #f0f3f7 !important;
  text-decoration: none !important;
  transition: background 0.15s, color 0.15s, padding-left 0.18s !important;
}

#mobileMenuDrawer a:hover {
  background: #f4f8ff !important;
  color: #1a5cb8 !important;
  padding-left: 28px !important;
}

/* CTA buttons at the bottom */
#mobileMenuDrawer .drawer-ctas {
  padding: 20px 16px 0 !important;
  display: flex !important;
  flex-direction: column !important;
  gap: 10px !important;
}

#mobileMenuDrawer .drawer-ctas a {
  border-bottom: none !important;
  border-radius: 8px !important;
  text-align: center !important;
  font-weight: 600 !important;
  font-size: 0.875rem !important;
  padding: 13px 16px !important;
}

#mobileMenuDrawer .btn-primary-drawer {
  background: #e8a020 !important;
  color: #0b1f3a !important;
}

#mobileMenuDrawer .btn-primary-drawer:hover {
  background: #f5b830 !important;
  padding-left: 16px !important;
}

#mobileMenuDrawer .btn-ghost-drawer {
  background: #f0f2f5 !important;
  color: #1c2333 !important;
}

#mobileMenuDrawer .btn-ghost-drawer:hover {
  background: #e4e8ee !important;
  padding-left: 16px !important;
}

/* Body scroll lock */
body.mobile-menu-open {
  overflow: hidden !important;
}

/* Full-width on tiny phones */
@media (max-width: 340px) {
  #mobileMenuDrawer {
    width: 100% !important;
    max-width: 100% !important;
    border-left: none !important;
  }
}